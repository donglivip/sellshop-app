webpackJsonp([39],{EZKS:function(t,s,e){"use strict";(function(t){s.a={name:"addstart",data:function(){return{index:0,two:!1,calendarShow:!1,time:"",bottomshow:!1,navdata:"",myusTraderStoresId:"",myusTdNum:"",usTpIsStores:"",myusTdDicsont:""}},mounted:function(){""==this.usTraderDiscountId?this.$store.state.head="添加折扣":(this.$store.state.head="编辑折扣",this.myusTdDicsont=this.usTdDicsont,this.myusTdNum=this.usTdNum,this.$refs.Calendar.ChoseMonth(this.$store.state.mytime),this.time=this.$store.state.mytime),this.myajax()},methods:{bottomchange:function(t){this.bottomshow=!this.bottomshow},opennew:function(t){this.$router.push({name:t})},tab:function(t,s){this.myusTraderStoresId=s,this.index=t},submit:function(){function s(){plus.nativeUI.showWaiting()}window.plus?s():document.addEventListener("plusready",s,!1);var e=this;if(""==e.time||""==e.myusTdDicsont||0==e.myusTdDicsont)return alert("请输入正确的参数"),!1;if(""==this.myusTraderStoresId?this.usTpIsStores=0:this.usTpIsStores=1,e.time=e.time.replace(/-/g,"/"),""==this.usTraderDiscountId){var a={usTraderId:localStorage.getItem("userid"),usTraderStoresId:e.myusTraderStoresId,usTdDicsont:e.myusTdDicsont,usTdAbortTime:new Date(e.time),usTdIsStores:e.usTpIsStores};t.ajax({type:"post",url:e.myurl+"/insertUsTraderDiscount",dataType:"json",data:a,success:function(t){function s(){plus.nativeUI.closeWaiting()}window.plus?s():document.addEventListener("plusready",s,!1),1==t.data?(plus.nativeUI.toast("添加完成"),e.$router.back()):plus.nativeUI.toast("添加失败")}})}else t.ajax({type:"post",url:e.myurl+"/updateUsTraderDiscount",dataType:"json",data:{usTraderDiscountId:e.usTraderDiscountId,usTraderStoresId:e.myusTraderStoresId,usTdNum:e.myusTdNum,usTdDicsont:e.myusTdDicsont,usTdAbortTime:new Date(e.time),usTraderId:localStorage.getItem("userid")},success:function(t){1==t.data?(plus.nativeUI.toast("编辑完成"),this.$router.back()):plus.nativeUI.toast("编辑失败")}})},change:function(t){this.two=t},handelChange:function(t,s){this.time=s},timeshow:function(){this.calendarShow=!this.calendarShow},myajax:function(){var s=this;t.ajax({type:"post",url:s.myurl+"/selectUsTraderStores",data:{usTraderId:localStorage.getItem("userid")},dataType:"json",success:function(t){console.log(t),0==t.data.length&&(alert("请先添加店铺"),this.opennew("addshop")),s.navdata=t.data}})}},computed:{myurl:function(){return this.$store.state.myurl},usTraderDiscountId:function(){return this.$store.state.usTraderDiscountId},usTdDicsont:function(){return this.$store.state.usTdDicsont},usTdNum:function(){return this.$store.state.usTdNum}},components:{THead:function(t){return e.e(55).then(function(){var s=[e("2Hch")];t.apply(null,s)}.bind(this)).catch(e.oe)}}}}).call(s,e("7t+N"))},RAX7:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("EZKS"),n={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"addstart",attrs:{id:"wrapper"}},[e("t-head"),t._v(" "),e("div",{attrs:{id:"main"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.myusTdDicsont,expression:"myusTdDicsont"}],attrs:{type:"number",placeholder:"请输入折扣(n%)"},domProps:{value:t.myusTdDicsont},on:{input:function(s){s.target.composing||(t.myusTdDicsont=s.target.value)}}}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.time,expression:"time"}],attrs:{type:"text",placeholder:"请输入折扣到期时间",readonly:"readonly"},domProps:{value:t.time},on:{click:t.timeshow,input:function(s){s.target.composing||(t.time=s.target.value)}}}),t._v(" "),e("div",{staticClass:"box"},t._l(t.navdata,function(s,a){return e("div",{staticClass:"group",class:t.index==a?"active":"",on:{click:function(e){return t.tab(a,s.usTraderStoresId)}}},[t._v("\n\t\t\t\t"+t._s(s.usTsCompanyName)+"\n\t\t\t")])}),0),t._v(" "),e("div",{staticClass:"submit",on:{click:t.submit}},[t._v("\n\t\t\t提交\n\t\t")])]),t._v(" "),e("calendar",{ref:"Calendar",on:{change:t.handelChange},model:{value:t.calendarShow,callback:function(s){t.calendarShow=s},expression:"calendarShow"}})],1)},staticRenderFns:[]};var o=function(t){e("tg8f")},i=e("VU/8")(a.a,n,!1,o,null,null);s.default=i.exports},tg8f:function(t,s){}});
//# sourceMappingURL=39.c40327fc2d94c1f127ae.js.map
webpackJsonp([47],{"+qRF":function(t,e,i){"use strict";(function(t){e.a={name:"addstart",data:function(){return{index:0,two:!1,calendarShow:!1,time:"",bottomshow:!1,navdata:"",myusTraderStoresId:"",myusTpLimitNum:"",usTpIsStores:"",myusTpPrice:"",myusTpLimitPrice:""}},mounted:function(){""==this.usTpLimitNum?this.$store.state.head="添加红包":(this.$store.state.head="编辑红包",this.myusTpPrice=this.usTpPrice,this.myusTpLimitNum=this.usTpLimitNum,this.myusTpLimitPrice=this.usTpLimitPrice),this.myajax()},methods:{bottomchange:function(t){this.bottomshow=!this.bottomshow},opennew:function(t){this.$router.push({name:t})},tab:function(t,e){this.myusTraderStoresId=e,this.index=t},submit:function(){function e(){plus.nativeUI.showWaiting()}window.plus?e():document.addEventListener("plusready",e,!1);var i=this;if(""==i.time||""==i.myusTpPrice||0==i.myusTpPrice)return alert("请输入正确的参数"),plus.nativeUI.closeWaiting(),!1;if(i.myusTpPrice>=1e3||i.myusTpLimitPrice>=1e3)return alert("红包金额在1000元以内"),plus.nativeUI.closeWaiting(),!1;if(0==this.myusTraderStoresId?this.usTpIsStores=0:this.usTpIsStores=1,i.time=i.time.replace(/-/g,"/"),""==this.usTpLimitNum){var s={usTraderId:localStorage.getItem("userid"),usTraderStoresId:i.myusTraderStoresId,usTpLimitPrice:i.myusTpLimitPrice,usTpPrice:i.myusTpPrice,usTpAbortTime:new Date(i.time),usTpIsStores:i.usTpIsStores,usTpLimitNum:i.myusTpLimitNum};t.ajax({type:"post",url:i.myurl+"/insertUsTraderPackage",dataType:"json",data:s,success:function(t){function e(){plus.nativeUI.closeWaiting()}window.plus?e():document.addEventListener("plusready",e,!1),1==t.data?(plus.nativeUI.toast("添加完成"),i.$router.back()):plus.nativeUI.toast("添加失败")},error:function(){plus.nativeUI.closeWaiting()}})}else{s={usTraderId:localStorage.getItem("userid"),usTraderStoresId:i.myusTraderStoresId,usTpLimitPrice:i.myusTpLimitPrice,usTpPrice:i.myusTpPrice,usTpAbortTime:new Date(i.time),usTpLimitNum:i.myusTpLimitNum,usTpStatus:1,usTraderPackageId:i.usTraderPackageId};t.ajax({type:"post",url:i.myurl+"/updateUsTraderPackage",dataType:"json",data:s,success:function(t){1==t.data?alert("编辑完成"):alert("编辑失败")},error:function(){plus.nativeUI.closeWaiting()}})}},change:function(t){this.two=t},handelChange:function(t,e){this.time=e},timeshow:function(){this.calendarShow=!this.calendarShow},myajax:function(){var e=this;t.ajax({type:"post",url:e.myurl+"/selectUsTraderStores",data:{usTraderId:localStorage.getItem("userid")},dataType:"json",success:function(t){0==t.data.length&&(alert("请先添加店铺"),this.opennew("addshop")),e.navdata=t.data}})}},computed:{myurl:function(){return this.$store.state.myurl},usTpPrice:function(){return this.$store.state.usTpPrice},usTpLimitPrice:function(){return this.$store.state.usTpLimitPrice},usTpLimitNum:function(){return this.$store.state.usTpLimitNum},usTraderPackageId:function(){return this.$store.state.usTraderPackageId}},components:{THead:function(t){return i.e(55).then(function(){var e=[i("2Hch")];t.apply(null,e)}.bind(this)).catch(i.oe)}}}}).call(e,i("7t+N"))},IfP3:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("+qRF"),a={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"addstart",attrs:{id:"wrapper"}},[i("t-head"),t._v(" "),i("div",{attrs:{id:"main"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.myusTpPrice,expression:"myusTpPrice"}],attrs:{type:"number",placeholder:"请输入红包金额"},domProps:{value:t.myusTpPrice},on:{input:function(e){e.target.composing||(t.myusTpPrice=e.target.value)}}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.myusTpLimitPrice,expression:"myusTpLimitPrice"}],attrs:{type:"number",placeholder:"红包使用限制金额"},domProps:{value:t.myusTpLimitPrice},on:{input:function(e){e.target.composing||(t.myusTpLimitPrice=e.target.value)}}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.myusTpLimitNum,expression:"myusTpLimitNum"}],attrs:{type:"number",placeholder:"限购数量"},domProps:{value:t.myusTpLimitNum},on:{input:function(e){e.target.composing||(t.myusTpLimitNum=e.target.value)}}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.time,expression:"time"}],attrs:{type:"text",placeholder:"请输入红包到期时间",readonly:"readonly"},domProps:{value:t.time},on:{click:t.timeshow,input:function(e){e.target.composing||(t.time=e.target.value)}}}),t._v(" "),i("div",{staticClass:"box"},t._l(t.navdata,function(e,s){return i("div",{staticClass:"group",class:t.index==s?"active":"",on:{click:function(i){return t.tab(s,e.usTraderStoresId)}}},[t._v("\n\t\t\t\t"+t._s(e.usTsCompanyName)+"\n\t\t\t")])}),0),t._v(" "),i("div",{staticClass:"submit",on:{click:t.submit}},[t._v("\n\t\t\t提交\n\t\t")])]),t._v(" "),i("calendar",{on:{change:t.handelChange},model:{value:t.calendarShow,callback:function(e){t.calendarShow=e},expression:"calendarShow"}})],1)},staticRenderFns:[]};var r=function(t){i("xceJ")},u=i("VU/8")(s.a,a,!1,r,null,null);e.default=u.exports},xceJ:function(t,e){}});
//# sourceMappingURL=47.fd6997d80cd10cf3acd1.js.map
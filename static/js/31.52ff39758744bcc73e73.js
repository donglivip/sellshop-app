webpackJsonp([31],{FCi1:function(t,e){},m2JQ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("mxtA"),r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login",attrs:{id:"wrapper"}},[s("t-head"),t._v(" "),s("div",{staticClass:"addshop",attrs:{id:"main"}},[s("form",{attrs:{action:""}},[s("p",[t._v("可添加1张商品照片")]),t._v(" "),s("div",{staticClass:"input-group",staticStyle:{"margin-bottom":".2rem",border:"0"},on:{click:function(e){return t.upload("usTsImgUrl")}}},[s("img",{staticClass:"upimg",attrs:{src:a("PRuO"),id:"usTsImgUrl"}}),t._v(" "),s("input",{attrs:{type:"hidden",placeholder:"商品图片","data-alert":"商品图片不能为空",id:"hidd"}})]),t._v(" "),s("div",{staticClass:"input-group",staticStyle:{"margin-bottom":".2rem",border:"0","flex-direction":"column","align-items":"flex-start"}},[s("div",[t._v("商品详情")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.usTsDetails,expression:"usTsDetails"}],attrs:{placeholder:"新鲜土豆，重约1kg，特价优惠"},domProps:{value:t.usTsDetails},on:{input:function(e){e.target.composing||(t.usTsDetails=e.target.value)}}})]),t._v(" "),""==t.usTraderShoppingId?s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.usTsName,expression:"usTsName"}],attrs:{type:"text",placeholder:"商品名称","data-alert":"商品名称不能为空"},domProps:{value:t.usTsName},on:{input:function(e){e.target.composing||(t.usTsName=e.target.value)}}})]):t._e(),t._v(" "),s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.usTsPrice,expression:"usTsPrice"}],attrs:{type:"number",placeholder:"商品价格","data-alert":"商品价格不能为空"},domProps:{value:t.usTsPrice},on:{input:function(e){e.target.composing||(t.usTsPrice=e.target.value)}}})]),t._v(" "),""==t.usTraderShoppingId?s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.usTsNorm,expression:"usTsNorm"}],attrs:{type:"text",placeholder:"商品规格 例:大份,小份","data-alert":"商品规格不能为空"},domProps:{value:t.usTsNorm},on:{input:function(e){e.target.composing||(t.usTsNorm=e.target.value)}}})]):t._e(),t._v(" "),s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.usTsStock,expression:"usTsStock"}],attrs:{type:"number",placeholder:"商品库存","data-alert":"商品库存不能为空"},domProps:{value:t.usTsStock},on:{input:function(e){e.target.composing||(t.usTsStock=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"input-group"},[s("div",{staticStyle:{flex:"1",color:"#333333","font-size":".2rem"}},[t._v("请选择一级分类")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.usTraderShoppingSort,expression:"usTraderShoppingSort"}],attrs:{name:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.usTraderShoppingSort=e.target.multiple?a:a[0]}}},t._l(t.mynav,function(e,a){return s("option",{domProps:{value:e.usTraderShoppingSortId}},[t._v(t._s(e.usTssResult))])}),0)]),t._v(" "),""==t.usTraderShoppingId?s("div",{staticClass:"input-group"},[s("div",{staticStyle:{flex:"1",color:"#333333","font-size":".2rem"}},[t._v("请选择商品库存单位")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.maStockUnitId,expression:"maStockUnitId"}],attrs:{name:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.maStockUnitId=e.target.multiple?a:a[0]}}},t._l(t.mynav01,function(e,a){return s("option",{domProps:{value:e.maStockUnitId}},[t._v(t._s(e.maSuName))])}),0)]):t._e(),t._v(" "),s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.usTsPackingFee,expression:"usTsPackingFee"}],attrs:{type:"text",placeholder:"包装费","data-alert":"包装费不能为空,没有请输入0"},domProps:{value:t.usTsPackingFee},on:{input:function(e){e.target.composing||(t.usTsPackingFee=e.target.value)}}})]),t._v(" "),s("input",{staticStyle:{color:"#FFFFFF"},attrs:{type:"button",name:"mysubmit",id:"mysubmit",value:"提交"},on:{click:t.gosubmit}})]),t._v(" "),s("transition",{attrs:{name:"alert"}},[s("alert",{directives:[{name:"show",rawName:"v-show",value:t.alertboo,expression:"alertboo"}],on:{alertboo:t.alertchange,alerttrue:t.alertchange}})],1)],1)],1)},staticRenderFns:[]};var i=function(t){a("FCi1")},n=a("VU/8")(s.a,r,!1,i,"data-v-42a6f6ba",null);e.default=n.exports},mxtA:function(t,e,a){"use strict";(function(t){var s=a("mvHQ"),r=a.n(s);e.a={name:"shopdetail",data:function(){return{usTsName:"",usTsPrice:"",usTsNorm:"",usTsStock:"",usTraderShoppingSort:"",maStockUnitId:"",usTsImgUrl:"",usTsDetails:"",mynav:"",mynav01:"",mynav02:"",alertboo:!1,myusTraderShoppingSort:"",usTsPackingFee:""}},mounted:function(){""==this.usTraderShoppingId?this.$store.state.head="添加商品":(this.$store.state.head="编辑商品",this.usTsPrice=this.usTmcPrice,this.usTsStock=this.usTmcLevel,this.usTsDetails=this.usRiDetailed),this.myajax()},methods:{myajax:function(){var e=this;t.ajax({type:"post",url:e.myurl+"/selectUsTraderShoppingSort",dataType:"json",data:{usTraderStoresId:localStorage.getItem("usTraderStoresId")},success:function(t){e.mynav=t.data}}),t.ajax({type:"post",url:e.myurl+"/selectMaStockUnit",dataType:"json",success:function(t){e.mynav01=t.data}})},alertchange:function(){this.alertboo=!this.alertboo},opennew:function(t){this.$router.push({name:t})},gosubmit:function(){var e=this;function a(){plus.nativeUI.showWaiting("添加中")}window.plus?a():document.addEventListener("plusready",a,!1);var s=t("#hidd").val();if(console.log(s),""==e.usTraderShoppingId){for(var i=0;i<t("input").length;i++)if(""==t("input").eq(i).val()){var n=function(){plus.nativeUI.closeWaiting()};if(window.plus?n():document.addEventListener("plusready",n,!1),1!=e.usTrLicenseStatus)return alert(t("input").eq(i).attr("data-alert")),!1;if("营业执照有效期不能为空"!=t("input").eq(i).attr("data-alert"))return alert(t("input").eq(i).attr("data-alert")),!1}var o={usTraderStoresId:localStorage.getItem("usTraderStoresId"),usTraderShoppingSort:e.usTraderShoppingSort,usTsName:e.usTsName,usTsPrice:e.usTsPrice,usTsNorm:e.usTsNorm,usTsStock:e.usTsStock,maStockUnitId:e.maStockUnitId,usTsImgUrl:s,usTsDetails:e.usTsDetails,usTsCreateName:localStorage.getItem("userid"),usTsStatus:1,usTsPackingFee:e.usTsPackingFee};t.ajax({type:"post",url:e.myurl+"/insertUsTraderShopping",dataType:"json",data:o,success:function(t){function a(){plus.nativeUI.closeWaiting()}window.plus?a():document.addEventListener("plusready",a,!1),1==t.data?e.$router.back():alert("添加失败")}})}else{o={usTraderShoppingId:e.usTraderShoppingId,usTsPrice:e.usTsPrice,usStoresEmployeeName:localStorage.getItem("userid"),usTsStock:e.usTsStock,usTsDetails:e.usTsDetails,usTsPackingFee:e.usTsPackingFee,usTsImgUrl:s,usTraderShoppingSort:e.usTraderShoppingSort};""==e.usTsPrice&&delete o.usTsPrice,""==e.usTsStock&&delete o.usTsStock,""==e.usTsDetails&&delete o.usTsDetails,""==e.usTsPackingFee&&delete o.usTsPackingFee,""==s&&delete o.usTsImgUrl,""==e.usTraderShoppingSort&&delete o.usTraderShoppingSort,console.log(r()(o)),t.ajax({type:"post",url:e.myurl+"/updateUsTraderShopping",dataType:"json",data:o,success:function(t){function a(){plus.nativeUI.closeWaiting()}window.plus?a():document.addEventListener("plusready",a,!1),1==t.data?e.$router.back():alert("失败")}})}},upload:function(t){var e=this;e.files=[],e.uploadtarget=t;plus.nativeUI.actionSheet({title:"请选择",cancel:"取消",buttons:[{title:"照相机"},{title:"相册"}]},function(t){switch(t.index){case 1:e.camera();break;case 2:e.album()}})},camera:function(){var t=this;plus.camera.getCamera().captureImage(function(e){plus.io.resolveLocalFileSystemURL(e,function(e){e.name;var a=e.toLocalURL();document.getElementById(t.uploadtarget).setAttribute("src",a),t.upload_img(a)},function(t){alert("读取拍照文件错误："+t.message)})},function(t){alert("失败："+t.message)},{filename:"_doc/camera/",index:1})},album:function(){var t=this;plus.gallery.pick(function(e){document.getElementById(t.uploadtarget).setAttribute("src",e),t.upload_img(e)},function(t){alert("取消选择图片")},{filter:"image"})},upload_img:function(e){var a=this,s=new Image;s.src=e,s.onload=function(){var e=this.width,s=this.height,i=e/s;s=(e=280)/i;var n=document.createElement("canvas"),o=n.getContext("2d");t(n).attr({width:e,height:s}),o.drawImage(this,0,0,e,s),t.ajax({type:"post",url:a.myurl+"/imageRiderImageUsTraderStores",dataType:"json",data:{imgStr:n.toDataURL("image/jpeg",1)},success:function(e){t("#hidd").val(e.data),console.log("res: "+r()(e))}})}}},computed:{myurl:function(){return this.$store.state.myurl},usTraderStoresId:function(){return this.$store.state.usTraderStoresId},usTraderShoppingId:function(){return this.$store.state.usTraderShoppingId},usTmcPrice:function(){return this.$store.state.usTmcPrice},usTmcLevel:function(){return this.$store.state.usTmcLevel},usRiDetailed:function(){return this.$store.state.usRiDetailed}},components:{alert:function(t){return a.e(55).then(function(){var e=[a("fSq5")];t.apply(null,e)}.bind(this)).catch(a.oe)},THead:function(t){return a.e(54).then(function(){var e=[a("2Hch")];t.apply(null,e)}.bind(this)).catch(a.oe)}}}}).call(e,a("7t+N"))}});
//# sourceMappingURL=31.52ff39758744bcc73e73.js.map